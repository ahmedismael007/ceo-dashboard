{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/i18n-config.ts"],"sourcesContent":["export const i18n = {\r\n    defaultLocale: \"en\",\r\n    locales: [\"en\", \"ar\"],\r\n};\r\n\r\nexport type Locale = (typeof i18n)[\"locales\"][number];"],"names":[],"mappings":";;;;AAAO,MAAM,OAAO;IAChB,eAAe;IACf,SAAS;QAAC;QAAM;KAAK;AACzB"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'stream')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`stream`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'crypto')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`crypto`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\nimport { i18n } from \"../i18n-config\";\r\nimport { match as matchLocale } from \"@formatjs/intl-localematcher\";\r\nimport Negotiator from \"negotiator\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nfunction getLocale(request: NextRequest): string {\r\n  const negotiatorHeaders: Record<string, string> = {};\r\n  request.headers.forEach((value, key) => (negotiatorHeaders[key] = value));\r\n\r\n  const locales = i18n.locales;\r\n  let languages = new Negotiator({ headers: negotiatorHeaders }).languages(\r\n    locales\r\n  );\r\n\r\n  return matchLocale(languages, locales, i18n.defaultLocale);\r\n}\r\n\r\nfunction isAuthenticated(request: NextRequest): boolean {\r\n  const token = request.cookies.get(\"auth_token\")?.value;\r\n  if (!token) return false;\r\n\r\n  try {\r\n    jwt.verify(token, process.env.JWT_SECRET!); // replace with your secret\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const pathname = request.nextUrl.pathname;\r\n\r\n  // Skip static/public files and folders (images, fonts, etc.)\r\n  const PUBLIC_FILE = /\\.(.*)$/;\r\n  const STATIC_PATHS = [\r\n    \"/manifest.json\",\r\n    \"/favicon.ico\",\r\n    \"/robots.txt\",\r\n    \"/sitemap.xml\",\r\n  ];\r\n  // Add folders to skip (images, fonts, etc.)\r\n  const STATIC_PREFIXES = [\r\n    \"/images/\",\r\n    \"/fonts/\",\r\n    \"/css/\",\r\n    \"/js/\",\r\n    \"/_next/\",\r\n    \"/public/\",\r\n  ];\r\n\r\n  if (\r\n    STATIC_PATHS.includes(pathname) ||\r\n    (PUBLIC_FILE.test(pathname) &&\r\n      STATIC_PREFIXES.some((prefix) => pathname.startsWith(prefix)))\r\n  ) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // Skip authentication routes (login/register/etc.)\r\n  if (pathname.startsWith(\"/authentication\")) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // Locale check (after auth)\r\n  const pathnameIsMissingLocale = i18n.locales.every(\r\n    (locale) => !pathname.startsWith(`/${locale}/`) && pathname !== `/${locale}`\r\n  );\r\n\r\n  if (pathnameIsMissingLocale) {\r\n    const locale = getLocale(request);\r\n    // âœ… Always check auth for everything else\r\n    if (!isAuthenticated(request)) {\r\n      return NextResponse.redirect(\r\n        new URL(`/${locale}/authentication`, request.url)\r\n      );\r\n    }\r\n    return NextResponse.redirect(new URL(`/${locale}${pathname}`, request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\"/((?!api|_next/static|_next/image|favicon.ico).*)\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;AACA;AACA;AACA;;;;;;AAEA,SAAS,UAAU,OAAoB;IACrC,MAAM,oBAA4C,CAAC;IACnD,QAAQ,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,MAAS,iBAAiB,CAAC,IAAI,GAAG;IAElE,MAAM,UAAU,8HAAI,CAAC,OAAO;IAC5B,IAAI,YAAY,IAAI,sJAAU,CAAC;QAAE,SAAS;IAAkB,GAAG,SAAS,CACtE;IAGF,OAAO,IAAA,oMAAW,EAAC,WAAW,SAAS,8HAAI,CAAC,aAAa;AAC3D;AAEA,SAAS,gBAAgB,OAAoB;IAC3C,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;IACjD,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI;QACF,wJAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU,GAAI,2BAA2B;QACvE,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,6DAA6D;IAC7D,MAAM,cAAc;IACpB,MAAM,eAAe;QACnB;QACA;QACA;QACA;KACD;IACD,4CAA4C;IAC5C,MAAM,kBAAkB;QACtB;QACA;QACA;QACA;QACA;QACA;KACD;IAED,IACE,aAAa,QAAQ,CAAC,aACrB,YAAY,IAAI,CAAC,aAChB,gBAAgB,IAAI,CAAC,CAAC,SAAW,SAAS,UAAU,CAAC,UACvD;QACA,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,mDAAmD;IACnD,IAAI,SAAS,UAAU,CAAC,oBAAoB;QAC1C,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,4BAA4B;IAC5B,MAAM,0BAA0B,8HAAI,CAAC,OAAO,CAAC,KAAK,CAChD,CAAC,SAAW,CAAC,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,KAAK,aAAa,CAAC,CAAC,EAAE,QAAQ;IAG9E,IAAI,yBAAyB;QAC3B,MAAM,SAAS,UAAU;QACzB,0CAA0C;QAC1C,IAAI,CAAC,gBAAgB,UAAU;YAC7B,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,eAAe,CAAC,EAAE,QAAQ,GAAG;QAEpD;QACA,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE,QAAQ,GAAG;IAC3E;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoD;AAChE"}}]
}